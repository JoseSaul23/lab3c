{% extends 'main.html' %}
<div>
  {% block content %}

  <style>
    .anchor {
      padding-top: 122px;
      margin-top: -122px;
    }

    .slideanim {
      visibility: hidden;
    }
    .slider {
      /* The name of the animation */
      animation-name: slide;
      -webkit-animation-name: slide;
      /* The duration of the animation */
      animation-duration: 1s;
      -webkit-animation-duration: 1s;
      /* Make the element visible */
      visibility: visible;
    }

    /* Go from 0% to 100% opacity (see-through) and specify the percentage from when to slide in the element along the Y-axis */
    @keyframes slide {
      0% {
        opacity: 0;
        transform: translateY(70%);
      }
      100% {
        opacity: 1;
        transform: translateY(0%);
      }
    }
    @-webkit-keyframes slide {
      0% {
        opacity: 0;
        -webkit-transform: translateY(70%);
      }
      100% {
        opacity: 1;
        -webkit-transform: translateY(0%);
      }
    }
  </style>
  {% load static %}
  <div
    class="py-4 d-flex align-items-center justify-content-center"
    style="
    background-image: url('{% static "/images/intro2.jpg" %}');
    background-repeat: no-repeat;
    height: 100vh;"
  >
    <div class="container">
      <h1 class="text-white text-center">
        {{ configuracion.introduction }}
      </h1>
    </div>
  </div>

  <div
    id="carouselExampleIndicators"
    class="carousel slide"
    data-bs-ride="carousel"
  >
    <div class="carousel-indicators">
      {% for image in images %} {% if forloop.first %}
      <button
        type="button"
        data-bs-target="#carouselExampleIndicators"
        data-bs-slide-to="{{forloop.counter0}}"
        class="active"
      ></button>
      {% else %}
      <button
        type="button"
        data-bs-target="#carouselExampleIndicators"
        data-bs-slide-to="{{forloop.counter0}}"
      ></button>

      {% endif %} {% endfor %}
    </div>

    <div class="carousel-inner">
      {% for image in images %}
      <div class="carousel-item {% if forloop.first %}active {% endif %}">
        <img
          style="height: 80vh"
          src="{{image.image.url}}"
          class="d-block w-100"
          alt="{{image.number}}"
        />
      </div>
      {% endfor %}
    </div>

    <button
      class="carousel-control-prev"
      type="button"
      data-bs-target="#carouselExampleIndicators"
      data-bs-slide="prev"
    >
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button
      class="carousel-control-next"
      type="button"
      data-bs-target="#carouselExampleIndicators"
      data-bs-slide="next"
    >
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>

  <div class="py-4">
    <div class="container">
      <div
        id="propuestas"
        class="anchor d-flex align-items-center justify-content-between"
      >
        <h3 class="text-secondary">Últimas iniciativas</h3>
        <a
          class="text-success fw-bold text-decoration-none"
          href="{% url 'iniciativas' %}"
          >VER TODAS</a
        >
      </div>
      <div class="row row-cols-xl-5 row-cols-lg-3 row-cols-md-2 row-cols-1">
        {% for proposal in last_proposals %}
        <div class="col mt-3">
          <div class="card">
            <img
              src="http://i3.ytimg.com/vi/{{ proposal.video_id }}/maxresdefault.jpg"
              class="card-img-top"
              alt="img_iniciativa"
            />
            <div class="card-body">
              <h5 class="card-title text-truncate">{{ proposal.name }}</h5>
              <p class="card-text text-truncate">{{ proposal.description }}</p>
              <a
                href="{% url 'iniciativa' proposal.id %}"
                class="btn btn-success"
                >Ver más</a
              >
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>

  <div class="py-4 bg-light">
    <div class="container">
      <div class="anchor d-flex justify-content-center">
        <i class="bi bi bi-list-check fs-2"></i>
      </div>
      <div id="unidades" class="anchor d-flex justify-content-center">
        <h3>Unidades</h3>
      </div>
      <br />
      <div class="slideanim">
        {% for phase in phases %}
        <div class="card mb-3">
          <div class="row g-0">
            <div class="col-12 col-xl-4">
              <div class="ratio ratio-16x9">
                <iframe
                  src="https://www.youtube.com/embed/{{ phase.video_id }}"
                  title="YouTube video player"
                  frameborder="0"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                  allowfullscreen
                ></iframe>
              </div>
            </div>
            <div class="col-12 col-xl-8">
              <div class="card-body">
                <h5 class="card-title">{{ phase.title }}</h5>
                <br />
                <p class="card-text">{{ phase.description }}</p>
                <br />
                <div class="d-flex justify-content-center gap-4">
                  <span data-bs-toggle="tooltip" title="Ver cartilla">
                    <a
                      class="button link-secondary"
                      href="{{phase.pdf.url}}"
                      target="_blank"
                      ><i class="bi bi-filetype-pdf fs-2"></i
                    ></a>
                  </span>
                  <span data-bs-toggle="tooltip" title="Descargar cartilla">
                    <a
                      class="button link-secondary"
                      href="{{ phase.pdf.url  }}"
                      download
                      ><i class="bi bi-download fs-2"></i
                    ></a>
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
      <div class="d-flex justify-content-center mt-2">
        <a  class="btn btn-outline-success" href="{{configuracion.pdf_general.url}}" download>Descargar unidad general</a>
      </div>
    </div>
  </div>

  <div class="py-4 bg-danger">
    <div class="container">
      <div class="anchor d-flex justify-content-center">
        <i class="bi bi-tools fs-2 text-white"></i>
      </div>
      <div id="herramientas" class="anchor d-flex justify-content-center">
        <h3 class="text-white">Caja de herramientas</h3>
      </div>
      <br />
      <div class="slideanim">
        <div class="row row-cols-1 row-cols-lg-3">
          {% for herramienta in herramientas %}
          <div class="col">
            <div class="card border-light text-white bg-danger">
              <div class="card-body">
                <h5 class="card-title">{{ herramienta.name }}</h5>
                <p class="card-text">{{ herramienta.description }}</p>
                <div class="d-flex justify-content-center gap-4">
                  <span data-bs-toggle="tooltip" title="Ver herramienta">
                    <a
                      class="button link-light"
                      href="{{herramienta.pdf.url}}"
                      target="_blank"
                      ><i class="bi bi-filetype-pdf fs-2"></i
                    ></a>
                  </span>
                  <span data-bs-toggle="tooltip" title="Descargar herramienta">
                    <a
                      class="button link-light"
                      href="{{ herramienta.pdf.url  }}"
                      download
                      ><i class="bi bi-download fs-2"></i
                    ></a>
                  </span>
                </div>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>

  <div class="py-4">
    <div class="container">
      <div class="anchor d-flex justify-content-center">
        <i class="bi bi-calendar-event fs-2"></i>
      </div>
      <div id="convocatorias" class="anchor d-flex justify-content-center">
        <h3>Convocatorias</h3>
      </div>
      <div class="slideanim">
        <table class="table table-striped table-hover">
          <thead>
            <tr>
              <th scope="col">Descripción</th>
              <th scope="col">Fecha de inicio</th>
              <th scope="col">Fecha final</th>
              <th scope="col"></th>
            </tr>
          </thead>
          <tbody>
            {% for convocatoria in convocatorias %}
            <tr>
              <td>
                {{ convocatoria.name }}
                <span
                  class="badge {% if convocatoria.state == 'Cerrada' %}bg-danger{% else %}bg-success{% endif %}"
                  >{{ convocatoria.state }}</span
                >
              </td>
              <td>{{ convocatoria.begins }}</td>
              <td>{{ convocatoria.ends }}</td>
              <td>
                <div class="d-flex align-items-center justify-content-around">
                  <span data-bs-toggle="tooltip" title="Ver PDF">
                    <a
                      class="button link-secondary"
                      href="{{convocatoria.pdf.url}}"
                      target="_blank"
                      ><i class="bi bi-filetype-pdf" style="font-size: 19px"></i
                    ></a>
                  </span>
                  <span data-bs-toggle="tooltip" title="Descargar PDF">
                    <a
                      class="button link-secondary"
                      href="{{ convocatoria.pdf.url  }}"
                      download
                      ><i class="bi bi-download" style="font-size: 19px"></i
                    ></a>
                  </span>
                </div>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="py-4 bg-warning">
    <div class="container">
      <div class="anchor d-flex justify-content-center">
        <i class="bi bi-file-earmark-person fs-2"></i>
      </div>
      <div id="testimonios" class="anchor d-flex justify-content-center">
        <h3>Testimonios</h3>
      </div>
      <br />
      <div class="slideanim">
        <div class="row row-cols-1 row-cols-lg-3">
          {% for testimonio in testimonios %}
          <div class="col">
            <div class="ratio ratio-16x9">
              <iframe
                src="https://www.youtube.com/embed/{{ testimonio.video_id }}"
                title="YouTube video player"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen
              ></iframe>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>

  <div class="py-4 bg-light">
    <div class="container">
      <div class="anchor mx-5" id="formulario">
        {% if messages %}
        <div class="alert alert-success">
          {% for message in messages %}
          <span>{{ message }}</span>
          {% endfor %}
        </div>
        {% endif %} {% include 'base/iniciativa-form.html' %}
      </div>
    </div>
  </div>

  <div class="py-4">
    <div class="container">
      <div class="d-flex justify-content-center">
        <h3 class="text-secondary">Nuestras alianzas</h3>
      </div>
      <br />
      <div class="row row-cols-1 row-cols-lg-3">
        {% for alianza in alianzas %}
        <div class="col mt-2">
          <img src="{{alianza.image.url}}" class="img-thumbnail" alt="ally">
        </div>
        {% endfor %}
      </div>
    </div>
  </div>

  {% endblock content %}
</div>
